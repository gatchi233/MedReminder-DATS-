<?xml version="1.0" encoding="utf-8" ?>
<pages:AuthPage
    x:Class="MedReminder.Pages.ViewResidentPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:pages="clr-namespace:MedReminder.Pages">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="16">

            <!-- Main info card -->
            <Border Padding="20" BackgroundColor="White">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="16"/>
                </Border.StrokeShape>
                <Border.Stroke>
                    <SolidColorBrush Color="#15616D"/>
                </Border.Stroke>

                <VerticalStackLayout Spacing="12">
                    <Label Text="{Binding Name}"
                           FontSize="24"
                           FontAttributes="Bold"
                           TextColor="#001524" />

                    <Label FontSize="14">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="SIN: " FontAttributes="Bold" TextColor="#001524" />
                                <Span Text="{Binding SIN}" TextColor="#001524" />
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>

                    <Label x:Name="DobAgeLabel" FontSize="14" TextColor="#001524" />
                </VerticalStackLayout>
            </Border>

            <!-- Emergency Contacts -->
            <Border Padding="16" BackgroundColor="White">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12"/>
                </Border.StrokeShape>
                <Border.Stroke>
                    <SolidColorBrush Color="#FF7D00"/>
                </Border.Stroke>

                <VerticalStackLayout Spacing="10">
                    <Label Text="Emergency Contacts" FontSize="16" FontAttributes="Bold" TextColor="#FF7D00" />

                    <Label FontSize="14">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="1. " FontAttributes="Bold" TextColor="#FF7D00" />
                                <Span Text="{Binding EmergencyContactName1}" FontAttributes="Bold" TextColor="#001524" />
                                <Span Text=" (" TextColor="#001524" />
                                <Span Text="{Binding EmergencyRelationship1}" TextColor="#001524" />
                                <Span Text=") " TextColor="#001524" />
                                <Span Text="{Binding EmergencyContactPhone1}" TextColor="#15616D" />
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>

                    <Label FontSize="14">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="2. " FontAttributes="Bold" TextColor="#FF7D00" />
                                <Span Text="{Binding EmergencyContactName2}" FontAttributes="Bold" TextColor="#001524" />
                                <Span Text=" (" TextColor="#001524" />
                                <Span Text="{Binding EmergencyRelationship2}" TextColor="#001524" />
                                <Span Text=") " TextColor="#001524" />
                                <Span Text="{Binding EmergencyContactPhone2}" TextColor="#15616D" />
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                </VerticalStackLayout>
            </Border>

            <!-- Doctor -->
            <Border Padding="16" BackgroundColor="White">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12"/>
                </Border.StrokeShape>
                <Border.Stroke>
                    <SolidColorBrush Color="#15616D"/>
                </Border.Stroke>

                <VerticalStackLayout Spacing="8">
                    <Label Text="Doctor" FontSize="16" FontAttributes="Bold" TextColor="#15616D" />
                    <Label FontSize="14">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="{Binding DoctorName}" FontAttributes="Bold" TextColor="#001524" />
                                <Span Text="  â€¢  " TextColor="#001524" />
                                <Span Text="{Binding DoctorContact}" TextColor="#15616D" />
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                </VerticalStackLayout>
            </Border>

            <!-- Allergies -->
            <Border Padding="16" BackgroundColor="White">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12"/>
                </Border.StrokeShape>
                <Border.Stroke>
                    <SolidColorBrush Color="#78290F"/>
                </Border.Stroke>

                <VerticalStackLayout Spacing="8">
                    <Label Text="Allergies" FontSize="16" FontAttributes="Bold" TextColor="#78290F" />
                    <Label Text="{Binding AllergyItems}" FontSize="14" TextColor="#001524" />
                </VerticalStackLayout>
            </Border>

            <!-- Remarks -->
            <Border Padding="16" BackgroundColor="White">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12"/>
                </Border.StrokeShape>
                <Border.Stroke>
                    <SolidColorBrush Color="#15616D"/>
                </Border.Stroke>

                <VerticalStackLayout Spacing="8">
                    <Label Text="Remarks" FontSize="16" FontAttributes="Bold" TextColor="#001524" />
                    <Label Text="{Binding Remarks}" FontSize="14" TextColor="#001524" LineBreakMode="WordWrap" />
                </VerticalStackLayout>
            </Border>

            <!-- Action Buttons -->
            <HorizontalStackLayout Spacing="24" Padding="0,12,0,20" HorizontalOptions="Center">

                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                    <ImageButton Source="icons8_edit_100.png"
                                 WidthRequest="36"
                                 HeightRequest="36"
                                 BackgroundColor="Transparent"
                                 CornerRadius="18"
                                 Padding="4"
                                 Clicked="OnEditClicked" />
                    <Label Text="Edit" FontSize="11" TextColor="#001524" HorizontalOptions="Center" />
                </VerticalStackLayout>

                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                    <ImageButton Source="icons8_pill_100.png"
                                 WidthRequest="36"
                                 HeightRequest="36"
                                 BackgroundColor="Transparent"
                                 CornerRadius="18"
                                 Padding="4"
                                 Clicked="OnViewMedicationsClicked" />
                    <Label Text="View Meds" FontSize="11" TextColor="#001524" HorizontalOptions="Center" />
                </VerticalStackLayout>

                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                    <ImageButton Source="icons8_close_100.png"
                                 WidthRequest="36"
                                 HeightRequest="36"
                                 BackgroundColor="Transparent"
                                 CornerRadius="18"
                                 Padding="4"
                                 Clicked="OnCloseClicked" />
                    <Label Text="Close" FontSize="11" TextColor="#001524" HorizontalOptions="Center" />
                </VerticalStackLayout>

            </HorizontalStackLayout>

        </VerticalStackLayout>
    </ScrollView>

</pages:AuthPage>
