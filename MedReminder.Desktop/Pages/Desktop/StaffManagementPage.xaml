<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MedReminder.Pages.Desktop.StaffManagementPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Staff Management">

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="New" Command="{Binding NewCommand}" />
        <ToolbarItem Text="Refresh" Command="{Binding RefreshCommand}" />
        <ToolbarItem Text="Save" Command="{Binding SaveCommand}" />
    </ContentPage.ToolbarItems>

    <Grid Padding="16" ColumnDefinitions="2*,3*" RowDefinitions="Auto,*">
        <Label Text="Staff list (select to edit)."
               TextColor="Gray" />

        <Grid Grid.Row="1" ColumnDefinitions="2*,3*" ColumnSpacing="16">

            <!-- Left: List -->
            <Border Padding="12" BackgroundColor="White">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12"/>
                </Border.StrokeShape>

                <CollectionView ItemsSource="{Binding Staff}"
                                SelectionMode="Single"
                                SelectedItem="{Binding Selected, Mode=TwoWay}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Border Padding="10" Margin="0,0,0,10" BackgroundColor="#FAFAFA">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="10"/>
                                </Border.StrokeShape>
                                <VerticalStackLayout Spacing="2">
                                    <Label Text="{Binding EmployeeId}" FontSize="14" />
                                    <Label Text="{Binding FullName}" FontSize="16" />
                                    <Label Text="{Binding Role}" FontSize="12" TextColor="Gray" />
                                </VerticalStackLayout>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Border>

            <!-- Right: Editor -->
            <Border Grid.Column="1" Padding="12" BackgroundColor="White">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12"/>
                </Border.StrokeShape>

                <ScrollView>
                    <VerticalStackLayout Spacing="10">

                        <Label Text="{Binding Error}" TextColor="Red" />

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                            <VerticalStackLayout>
                                <Label Text="EmployeeId" />
                                <Entry Text="{Binding EmployeeId, Mode=TwoWay}" Placeholder="EMP-001" />
                            </VerticalStackLayout>

                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="Role" />
                                <Picker ItemsSource="{Binding Roles}"
                                        SelectedItem="{Binding Role, Mode=TwoWay}" />
                            </VerticalStackLayout>
                        </Grid>

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                            <VerticalStackLayout>
                                <Label Text="First Name" />
                                <Entry Text="{Binding FirstName, Mode=TwoWay}" />
                            </VerticalStackLayout>

                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="Last Name" />
                                <Entry Text="{Binding LastName, Mode=TwoWay}" />
                            </VerticalStackLayout>
                        </Grid>

                        <Label Text="Job Title" />
                        <Entry Text="{Binding JobTitle, Mode=TwoWay}" />

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                            <VerticalStackLayout>
                                <Label Text="Department" />
                                <Entry Text="{Binding Department, Mode=TwoWay}" />
                            </VerticalStackLayout>

                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="Employment Status" />
                                <Entry Text="{Binding EmploymentStatus, Mode=TwoWay}" Placeholder="Full-time" />
                            </VerticalStackLayout>
                        </Grid>

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                            <VerticalStackLayout>
                                <Label Text="Hourly Wage" />
                                <Entry Text="{Binding HourlyWage, Mode=TwoWay}" Keyboard="Numeric" />
                            </VerticalStackLayout>

                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="Shift Preference" />
                                <Entry Text="{Binding ShiftPreference, Mode=TwoWay}" Placeholder="Day / Evening / Night / Any" />
                            </VerticalStackLayout>
                        </Grid>

                        <Label Text="Compliance" FontAttributes="Bold" />

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                            <VerticalStackLayout>
                                <Label Text="First Aid Expiry" />
                                <Entry Text="{Binding FirstAidExpiry, Mode=TwoWay}" Placeholder="YYYY-MM-DD" />
                            </VerticalStackLayout>

                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="FoodSafe Certified" />
                                <Switch IsToggled="{Binding FoodSafeCertified, Mode=TwoWay}" />
                            </VerticalStackLayout>
                        </Grid>

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="10" Margin="0,10,0,0">
                            <Button Text="{Binding ToggleEnabledText}"
                                    Command="{Binding ToggleEnabledCommand}" />

                            <HorizontalStackLayout Grid.Column="1" Spacing="10">
                                <Label Text="Enabled" VerticalOptions="Center" />
                                <Switch IsToggled="{Binding IsEnabled, Mode=TwoWay}" />
                            </HorizontalStackLayout>
                        </Grid>

                    </VerticalStackLayout>
                </ScrollView>
            </Border>

        </Grid>
    </Grid>
</ContentPage>
